# Weekly Report 2025-07-29

**ToddlerBot Simulation**

| 항목 | 내용 |
|------|------|
| 작성일 | July 28, 2025 |
| 작성자 | EunwooSong |
| 이메일 | song200348@gmail.com |

---

## 진행 현황

이번 주에는 Toddlerbot Migration 작업과 Toddlerbot RL Result 도출을 완료하였다. 다음 단계로는 Heat2Torque test on basic RL Agent 진행과 주제 발전을 계획하고 있다.

---

## Toddlerbot Migration

### 마이그레이션 결과

이번 마이그레이션을 통해 주요 패키지들의 버전을 대폭 업그레이드하였다. jax(core, lib 등)는 0.4.28에서 0.6.2로, brax는 0.10.5에서 0.12.4로, mujoco는 3.2.4에서 3.3.4로 각각 업그레이드를 진행하였다.

### 마이그레이션이 필요했던 이유

마이그레이션이 필요했던 배경에는 여러 기술적 문제가 있었다.

첫째, JAX에서 빌드 시 Blackwell 아키텍처에서 컴파일 오류가 발생하였다. 구체적으로 SM90A 컴파일 문제가 발생했으며, 이는 Hopper 아키텍처 또는 CUDA 12.0과 관련된 것으로 추정된다. 최신 CUDA 버전을 지원하지 않는 문제도 확인되었다.

둘째, JAX 버전에 따른 Tracer 문제가 발생하였다. 특히 Domain Randomization 함수에서 메모리 누수가 발생하는 것으로 의심되었다.

셋째, JAX 버전에 따른 연산 성능 차이가 존재하였다. 최신 버전을 사용하는 것이 학습 시간 단축에 유리하다는 점이 확인되었다.

넷째, 커스텀된 brax로 인해 최신 버전의 코드를 바로 사용할 수 없는 문제가 있었다. 이로 인해 기존의 코드를 저자가 의도한 대로 사용할 수 없는 상황이 발생하였다.

### 해결 방법

위 문제들을 해결하기 위해 Brax 코드를 수정하여 JAX 버전에 맞는 마이그레이션을 진행하였다. 먼저 최신의 Brax를 git clone하였고, 이전 Toddlerbot에 사용된 커스텀 brax의 commit log를 참고하여 수정을 진행하였다. 원본 커스텀 brax는 https://github.com/hshi74/brax 에서 확인할 수 있다. 최신 버전에 적절한 구문과 brax 버전에 따라 달라진 내용을 추적하여 코드를 작성하였다.

마이그레이션 결과물은 https://github.com/EunwooSong/brax 에서 확인할 수 있다.

---

## Toddlerbot RL 학습 결과

RTX 5080 환경에서 약 10시간 동안 강화학습을 진행하였다. 아래 이미지는 학습 초기 단계(5,120,000 steps)와 학습 완료 단계(302,080,000 steps)의 결과를 각각 보여준다.

![RL 학습 결과 - 초기 단계 (5,120,000 steps)](../images/WR_07_29/slide09_img10_39d2273c.jpg)

![RL 학습 결과 - 최종 단계 (302,080,000 steps)](../images/WR_07_29/slide09_img11_6aeca4f0.jpg)

수정된 Toddlerbot 코드는 https://github.com/EunwooSong/toddlerbot 에서 확인할 수 있으며, 주요 수정사항은 일부 코드를 JAX 버전에 맞게 변경한 것이다.

---

## Heat2Torque 시뮬레이션 테스트 계획

이 섹션은 현재 TODO 상태로, 향후 진행 예정이다.

### 연구 주제

본 테스트의 목적은 학습된 Agent가 새로 주어진 환경에 어떻게 대응하는지 확인하는 것이다. 구체적으로 모터의 과열 상황을 부여하여 아래와 같은 상황들을 시뮬레이션할 계획이다.

먼저 주요 모터가 동작을 멈추는 상황을 시뮬레이션한다. 다음으로 주요 모터의 토크에 제한이 있는 상황을 테스트한다. 마지막으로 모터 온도에 따른 토크 제한 상황을 검증한다. 이러한 시뮬레이션을 통해 제안하는 주제가 적절한지 확인할 예정이다.

### 체크리스트

테스트를 진행하기 위해 다음 항목들을 순차적으로 완료해야 한다. 먼저 실제 사용되는 모터의 에너지 효율성을 데이터화해야 한다. 그 다음 Heat2Torque 시뮬레이터를 제작하고, 최종적으로 테스트를 수행한다.

### 고려 사항

본 연구를 진행함에 있어 몇 가지 고려해야 할 점이 있다.

우선 많은 cost가 필요하다는 점을 인지해야 한다. 본 연구의 핵심은 저가 모터의 한계인 높은 발열과 이로 인한 잦은 고장 문제를 해결하는 것이다. 궁극적으로 로봇이 스스로 안정적인 동작을 수행하는 데 초점을 맞추고 있다.

또한 제안한 1차 열모델 시뮬레이터로도 충분한지 검증이 필요하다. 다른 외부 요인을 제외하고, 현재 모터의 온도가 특정 수준일 때 어떤 결과가 나오는지 확인해야 한다.

---

*Copyright 2024 Global School of Media*
