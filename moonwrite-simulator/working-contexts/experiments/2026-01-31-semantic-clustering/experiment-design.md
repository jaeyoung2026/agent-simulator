# 실험 설계: 의미 추출 & 클러스터링 방법 비교

## 1. 현재 Moonwriter 방식 (Baseline)

### 의미 추출
```
슬라이드 → Gemini AI 분석 → SemanticUnit[]
```
- **방식**: LLM 직접 추출 (프롬프트에 원칙 주입)
- **특징**:
  - 하나의 슬라이드에서 여러 SemanticUnit 추출 가능
  - Category + Role 다층 분류
  - 이미지, 테이블 포함 멀티모달 분석

### 클러스터링
```
SemanticUnit[] → LLM 분류 → 5단계 Narrative Arc
```
- **방식**: LLM 직접 분류 (Direct 또는 Distributed)
- **특징**:
  - Thesis-First 패턴
  - 5단계 논문 흐름 (배경→방법→결과→해석→기여)

---

## 2. 비교 대상 방법

### 방법 A: 임베딩 기반 (Semantic Chunking + SBERT Clustering)

**의미 추출**: Semantic Chunking
```
슬라이드 텍스트 → 문장 임베딩 → 유사도 기반 분할 → Chunk[]
```
- 임베딩 유사도로 주제 전환점 탐지
- 의미적으로 연결된 문장들을 하나의 청크로

**클러스터링**: SBERT + K-Means
```
Chunk[] → SBERT 임베딩 → K-Means (k=5) → 5단계 할당
```
- 각 클러스터 중심과 5단계 설명의 유사도로 Stage 매핑

**장점**: 빠름, 비용 저렴, 재현성 높음
**단점**: 의미적 뉘앙스 놓칠 수 있음

---

### 방법 B: LLM 강화 (Proposition + Few-Shot)

**의미 추출**: Proposition-Based
```
슬라이드 텍스트 → LLM → 원자적 명제[] → SemanticUnit[]
```
- 각 문장을 독립적인 명제로 분해
- 명제 단위로 더 세밀한 분석

**클러스터링**: Few-Shot LLM 분류
```
SemanticUnit[] → Few-Shot 프롬프트 → 5단계 분류
```
- 각 Stage에 대한 예시 제공
- Chain-of-Thought로 분류 근거 명시

**장점**: 높은 정확도, 분류 근거 확인 가능
**단점**: 비용 높음, 속도 느림

---

### 방법 C: 하이브리드 (임베딩 + LLM 정제)

**의미 추출**: 현재 방식 유지 (Gemini)

**클러스터링**: SBERT 초벌 + LLM 정제
```
SemanticUnit[] → SBERT 임베딩 → K-Means 초벌 분류
                                    ↓
                              LLM 경계 정제 → 최종 5단계
```
- 임베딩으로 빠르게 초벌 분류
- LLM으로 경계 케이스만 정제

**장점**: 비용 절감 + 품질 유지
**단점**: 복잡도 증가

---

## 3. 실험 설계

### 테스트 데이터

```
/slides/ 폴더에서 3개 파일 선정:
- WR 07_01 - EunwooSong.pptx (초기)
- WR 09_23.pptx (중간)
- WR 12_23.pptx (최근)
```

### 평가 기준

| 기준 | 측정 방법 |
|-----|----------|
| **추출 품질** | 추출된 의미 단위 수, 중복/누락 여부 |
| **분류 정확도** | 5단계 분류의 적절성 (수동 검토) |
| **일관성** | 동일 내용에 대한 일관된 분류 |
| **비용** | API 호출 수, 토큰 사용량 |
| **속도** | 처리 시간 |

### 실험 절차

```
1. 테스트 데이터 준비
   - 3개 pptx에서 텍스트 추출
   - 샘플 슬라이드 10개 선정

2. 각 방법 적용
   - Baseline (현재 Moonwriter)
   - 방법 A (임베딩 기반)
   - 방법 B (LLM 강화)
   - 방법 C (하이브리드)

3. 결과 수집
   - 추출된 의미 단위
   - 5단계 분류 결과
   - 처리 시간, 비용

4. 비교 분석
   - 정량적 비교 (수, 시간, 비용)
   - 정성적 비교 (품질 샘플 검토)
```

---

## 4. 구현 범위

### 이번 실험에서 구현할 것

| 방법 | 의미 추출 | 클러스터링 |
|-----|----------|-----------|
| Baseline | ✓ (기존) | ✓ (기존) |
| 방법 A | 프롬프트 시뮬레이션 | SBERT + K-Means 시뮬레이션 |
| 방법 B | 프롬프트 시뮬레이션 | Few-Shot 프롬프트 |
| 방법 C | ✓ (기존) | 하이브리드 프롬프트 |

### 시뮬레이션 방식

실제 API 호출 대신 **프롬프트 설계**와 **예상 결과 형태**를 비교:
- 각 방법의 프롬프트를 작성
- 동일한 샘플 입력에 대해 LLM에게 각 프롬프트로 처리 요청
- 결과 비교

---

## 5. 예상 결과

| 방법 | 품질 | 비용 | 속도 | 복잡도 |
|-----|------|------|------|--------|
| Baseline | ★★★★ | ★★★ | ★★★ | ★★ |
| 방법 A | ★★★ | ★★★★★ | ★★★★★ | ★★★ |
| 방법 B | ★★★★★ | ★★ | ★★ | ★★★ |
| 방법 C | ★★★★ | ★★★★ | ★★★★ | ★★★★ |

---

## 6. 다음 단계

1. 테스트 데이터에서 샘플 텍스트 추출
2. 각 방법의 프롬프트 작성
3. 동일 입력으로 각 방법 실행
4. 결과 비교 문서 작성
